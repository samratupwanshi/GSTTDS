<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GST Search Tool</title>
<style>
  body { font-family: Arial, sans-serif; background-color: #f4f9ff; margin: 0; padding: 0; }
  header { background-color: #0b74c4; color: white; text-align: center; padding: 15px; font-size: 22px; font-weight: bold; }
  .container { max-width: 600px; background: white; margin: 30px auto; padding: 20px; border-radius: 8px; box-shadow: 0px 0px 15px rgba(0,0,0,0.1); }
  label { font-weight: bold; display: block; margin-bottom: 8px; }
  input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; text-transform: uppercase; }
  button { background-color: #0b74c4; color: white; border: none; padding: 10px 15px; font-size: 16px; border-radius: 5px; cursor: pointer; }
  button:hover { background-color: #065a9e; }
  table { width: 100%; border-collapse: collapse; margin-top: 15px; }
  th, td { text-align: left; padding: 8px; border-bottom: 1px solid #ddd; }
  footer { text-align: center; padding: 15px; background-color: #0b74c4; color: white; position: fixed; width: 100%; bottom: 0; }
</style>
</head>
<body>
  <header>GST Number Search</header>
  <div class="container">
    <label for="gstin">Enter GSTIN:</label>
    <input type="text" id="gstin" maxlength="15" placeholder="Enter 15 digit GST Number">
    <button onclick="searchGST()">Search</button>
    <div id="result"></div>
  </div>
  <footer>Software developed by S World The Complete Accounting Solutions</footer>

<script>
const API_KEY = "0a0b020a6c226f0392b26ac877876e19";

// Mapping GST Business Type codes to readable text
const businessTypeMap = {
    REG: "Regular",
    COM: "Composition",
    UNR: "Unregistered",
    SEZ: "SEZ",
    TDS: "TDS Deductor"
};

function searchGST() {
    const gstin = document.getElementById("gstin").value.trim().toUpperCase();
    const resultDiv = document.getElementById("result");

    const gstRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
    if (!gstRegex.test(gstin)) {
        resultDiv.innerHTML = "<p style='color:red;'>Invalid GSTIN format.</p>";
        return;
    }

    resultDiv.innerHTML = "<p>Loading...</p>";

    fetch(`https://api.gstincheck.co.in/gstin/${gstin}`, {
        method: "GET",
        headers: {
            "accept": "application/json",
            "X-API-KEY": API_KEY
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.flag !== "1" || !data.data) {
            resultDiv.innerHTML = "<p style='color:red;'>GSTIN not found or inactive.</p>";
            return;
        }

        const details = data.data;

        let output = `
          <table>
            <tr><th>GSTIN</th><td>${details.gstin || "N/A"}</td></tr>
            <tr><th>Trade Name</th><td>${details.tradeNam || "N/A"}</td></tr>
            <tr><th>Legal Name</th><td>${details.lgnm || "N/A"}</td></tr>
            <tr><th>Status</th><td>${details.sts || "N/A"}</td></tr>
            <tr><th>Registration Date</th><td>${details.rgdt ? formatDate(details.rgdt) : "N/A"}</td></tr>
            <tr><th>Type</th><td>${details.ctb || "N/A"}</td></tr>
            <tr><th>Business Type</th><td>${details.dty ? (businessTypeMap[details.dty] || details.dty) : "N/A"}</td></tr>
          </table>
        `;
        resultDiv.innerHTML = output;
    })
    .catch(err => {
        console.error(err);
        resultDiv.innerHTML = "<p style='color:red;'>Error fetching GST data.</p>";
    });
}

function formatDate(dateStr) {
    if (!dateStr) return "N/A";
    if (dateStr.includes("-")) {
        const [year, month, day] = dateStr.split("-");
        return `${day}-${month}-${year}`;
    }
    return dateStr;
}
</script>
</body>
</html>